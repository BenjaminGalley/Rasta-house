<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JUNGLE SLOTS</title>
    <style>
        body { background: #000; color: white; font-family: sans-serif; text-align: center; margin: 0; }
        /* Background uses your asset.bg.jpg */
        .game-area { 
            height: 100vh; background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('asset/asset.bg.jpg'); 
            background-size: cover; display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .reels { display: flex; gap: 10px; background: rgba(0,0,0,0.8); padding: 20px; border: 3px solid #FFD100; border-radius: 15px; }
        .reel { width: 80px; height: 120px; background: white; border-radius: 5px; overflow: hidden; position: relative; }
        /* Reel images use your asset.tiles.jpg */
        .symbol { width: 80px; height: 120px; background: url('asset/asset.tiles.jpg'); background-size: cover; }
        .spin-btn { background: #008542; color: white; padding: 20px 60px; font-size: 1.5rem; border: none; border-radius: 50px; margin-top: 20px; font-weight: bold; cursor: pointer; border: 2px solid #FFD100; }
    </style>
</head>
<body>
    <div class="game-area">
        <h1 style="color:#FFD100; margin-bottom: 10px;">JUNGLE SLOTS</h1>
        <div class="reels">
            <div class="reel"><div id="r1" class="symbol"></div></div>
            <div class="reel"><div id="r2" class="symbol"></div></div>
            <div class="reel"><div id="r3" class="symbol"></div></div>
        </div>
        <div style="margin-top:20px; font-size: 1.2rem;">BALANCE: <span id="s-bal">0.00</span> ETB</div>
        <button class="spin-btn" onclick="spin()">SPIN (5 ETB)</button>
        <a href="index.html" style="color:#FFD100; display:block; margin-top: 20px; text-decoration: none;">BACK</a>
    </div>

    <script>
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzdPewsjld31mT1oBLhtCk_bkM5B_iVcaOeTMJUFMPxqgyH2bFJVYZIFTcZrPgxBrID/exec";
        let user = JSON.parse(localStorage.getItem('rasta_user'));

        function spin() {
            if(user.balance < 5) return alert("No money!");
            user.balance -= 5;
            document.getElementById('s-bal').innerText = user.balance.toFixed(2);
            
            // Spinning Animation Logic
            const r1 = document.getElementById('r1');
            r1.style.opacity = "0.5";
            setTimeout(() => {
                r1.style.opacity = "1";
                const win = Math.random() > 0.9;
                if(win) {
                    user.balance += 50;
                    alert("BIG WIN! +50 ETB");
                }
                updateServer();
            }, 1000);
        }

        async function updateServer() {
            localStorage.setItem('rasta_user', JSON.stringify(user));
            document.getElementById('s-bal').innerText = user.balance.toFixed(2);
            // This would normally sync to the sheet in a real game
        }

        window.onload = () => { 
            if(!user) location.href='login.html';
            document.getElementById('s-bal').innerText = parseFloat(user.balance).toFixed(2);
        };
    </script>
</body>
</html>
